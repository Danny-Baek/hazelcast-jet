<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Change Data Capture · Hazelcast Jet</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="**Change data capture** refers to the process of **observing changes"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Change Data Capture · Hazelcast Jet"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jet-start.sh/"/><meta property="og:description" content="**Change data capture** refers to the process of **observing changes"/><meta property="og:image" content="https://jet-start.sh/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jet-start.sh/img/undraw_tweetstorm.svg"/><meta name="robots" content="noindex"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://jet-start.sh/blog/atom.xml" title="Hazelcast Jet Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://jet-start.sh/blog/feed.xml" title="Hazelcast Jet Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-158279495-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,500"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-dark.svg" alt="Hazelcast Jet"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs" target="_self">Documentation</a></li><li class=""><a href="https://github.com/hazelcast/hazelcast-jet/releases" target="_self">Download</a></li><li class=""><a href="https://github.com/hazelcast/hazelcast-jet" target="_self">View on GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Tutorials</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Get Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/get-started/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/get-started/first-job">Your First Jet Program</a></li><li class="navListItem"><a class="navItem" href="/docs/get-started/installation">Set Up a Jet Cluster</a></li><li class="navListItem"><a class="navItem" href="/docs/get-started/submit-job">Submit a Job to the Cluster</a></li><li class="navListItem"><a class="navItem" href="/docs/get-started/scale-job">Scale Your Job</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Programming Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/api/pipeline">Building Pipelines</a></li><li class="navListItem"><a class="navItem" href="/docs/api/stateless-transforms">Stateless Transforms</a></li><li class="navListItem"><a class="navItem" href="/docs/api/stateful-transforms">Stateful Transforms</a></li><li class="navListItem"><a class="navItem" href="/docs/api/sources-sinks">Sources and Sinks</a></li><li class="navListItem"><a class="navItem" href="/docs/api/data-structures">Distributed Data Structures</a></li><li class="navListItem"><a class="navItem" href="/docs/api/serialization">Serialization</a></li><li class="navListItem"><a class="navItem" href="/docs/api/testing">Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/api/javadoc">Javadoc</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/tutorials/map-join">Join Static Data to a Stream</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/kafka">Work with Apache Kafka</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/observables">Reactive Streams</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/tutorials/cdc">Change Data Capture</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/stream-imap">Stream changes from IMap</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/python">Apply Transforms using Python</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/windowing">Windowed Aggregation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/concepts/dag">Directed Acylic Graph (DAG)</a></li><li class="navListItem"><a class="navItem" href="/docs/concepts/event-time">Streaming and Event Time</a></li><li class="navListItem"><a class="navItem" href="/docs/concepts/processing-guarantees">Processing Guarantees for Stateful Computation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Operations Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/operations/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/operations/cluster-sizing">Cluster Sizing</a></li><li class="navListItem"><a class="navItem" href="/docs/operations/cluster-topology">Cluster Topology</a></li><li class="navListItem"><a class="navItem" href="/docs/operations/job-management">Job Management</a></li><li class="navListItem"><a class="navItem" href="/docs/operations/kubernetes">Jet on Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/operations/monitoring">Monitoring and Metrics</a></li><li class="navListItem"><a class="navItem" href="/docs/operations/spring">Spring Integration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Architecture<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/architecture/distributed-computing">Distributed Execution</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture/execution-engine">Cooperative Threading</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture/snapshots">Distributed Snapshots</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture/event-time">Event Time Processing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Design Documents<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/design-docs/unit-testing">Pipeline API: Unit Testing Support</a></li><li class="navListItem"><a class="navItem" href="/docs/design-docs/kafka-connect">Kafka Connect Source</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Roadmap<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/roadmap">Roadmap</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Change Data Capture</h1></header><article><div><span><p><strong>Change data capture</strong> refers to the process of <strong>observing changes
made to a database</strong> and extracting them in a form usable by other
systems, for the purposes of replication, analysis and many many more.</p>
<p>Change Data Capture is especially important to Jet, because it allows
for the <strong>integration with legacy systems</strong>. Database changes form a
stream of events which can be efficiently processed by Jet.</p>
<p>Implementation of CDC in Jet is based on
<a href="https://debezium.io/">Debezium</a>, which is an open source distributed
platform for change data capture. It provides Kafka Connect compatible
CDC connectors for a
<a href="https://debezium.io/documentation/reference/1.0/connectors/index.html">variety of popular databases</a>
.</p>
<p>The <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect API</a>
is an interface developed for Kafka, that simplifies and automates the
integration of a new data source (or sink) with your Kafka cluster.
Since version 4.0 Jet includes a generic Kafka Connect Source, thus
making the integration of Debezium's connectors a simple matter of
configuration:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-22-tab-23" class="nav-link active" data-group="group_22" data-tab="tab-group-22-content-23">MongoDB</div><div id="tab-group-22-tab-24" class="nav-link" data-group="group_22" data-tab="tab-group-22-content-24">MySQL</div><div id="tab-group-22-tab-25" class="nav-link" data-group="group_22" data-tab="tab-group-22-content-25">PostgreSQL</div></div><div class="tab-content"><div id="tab-group-22-content-23" class="tab-pane active" data-group="group_22" tabindex="-1"><div><span><pre><code class="hljs css language-java">Configuration configuration = Configuration<br />        .create()<br />        .with(<span class="hljs-string">"name"</span>, <span class="hljs-string">"mongodb-inventory-connector"</span>)<br />        .with(<span class="hljs-string">"connector.class"</span>, <span class="hljs-string">"io.debezium.connector.mongodb.MongoDbConnector"</span>)<br />        <span class="hljs-comment">/* begin connector properties */</span><br />        .with(<span class="hljs-string">"mongodb.hosts"</span>, <span class="hljs-string">"rs0/"</span> + mongo.getContainerIpAddress() + <span class="hljs-string">":"</span><br />                + mongo.getMappedPort(MongoDBContainer.MONGODB_PORT))<br />        .with(<span class="hljs-string">"mongodb.name"</span>, <span class="hljs-string">"fullfillment"</span>)<br />        .with(<span class="hljs-string">"mongodb.user"</span>, <span class="hljs-string">"debezium"</span>)<br />        .with(<span class="hljs-string">"mongodb.password"</span>, <span class="hljs-string">"dbz"</span>)<br />        .with(<span class="hljs-string">"mongodb.members.auto.discover"</span>, <span class="hljs-string">"false"</span>)<br />        .with(<span class="hljs-string">"collection.whitelist"</span>, <span class="hljs-string">"inventory.*"</span>)<br />        .with(<span class="hljs-string">"database.history.hazelcast.list.name"</span>, <span class="hljs-string">"test"</span>)<br />        .build();<br /><br />Pipeline pipeline = Pipeline.create();<br />pipeline.readFrom(DebeziumSources.cdc(configuration))<br />        .withoutTimestamps()<br />        .map(record -&gt; Values.convertToString(record.valueSchema(), record.value()))<br />        .writeTo(Sinks.logger());<br /><br />JobConfig jobConfig = <span class="hljs-keyword">new</span> JobConfig();<br />jobConfig.addJarsInZip(<span class="hljs-string">"/path/to/debezium-connector-mongodb.zip"</span>);<br /><br />JetInstance jet = Jet.bootstrappedInstance();<br />Job job = jet.newJob(pipeline, jobConfig);<br />job.join();<br /></code></pre>
</span></div></div><div id="tab-group-22-content-24" class="tab-pane" data-group="group_22" tabindex="-1"><div><span><pre><code class="hljs css language-java">Configuration configuration = Configuration<br />        .create()<br />        .with(<span class="hljs-string">"name"</span>, <span class="hljs-string">"mysql-inventory-connector"</span>)<br />        .with(<span class="hljs-string">"connector.class"</span>, <span class="hljs-string">"io.debezium.connector.mysql.MySqlConnector"</span>)<br />        <span class="hljs-comment">/* begin connector properties */</span><br />        .with(<span class="hljs-string">"database.hostname"</span>, mysql.getContainerIpAddress())<br />        .with(<span class="hljs-string">"database.port"</span>, mysql.getMappedPort(MYSQL_PORT))<br />        .with(<span class="hljs-string">"database.user"</span>, <span class="hljs-string">"debezium"</span>)<br />        .with(<span class="hljs-string">"database.password"</span>, <span class="hljs-string">"dbz"</span>)<br />        .with(<span class="hljs-string">"database.server.id"</span>, <span class="hljs-string">"184054"</span>)<br />        .with(<span class="hljs-string">"database.server.name"</span>, <span class="hljs-string">"dbserver1"</span>)<br />        .with(<span class="hljs-string">"database.whitelist"</span>, <span class="hljs-string">"inventory"</span>)<br />        .with(<span class="hljs-string">"database.history.hazelcast.list.name"</span>, <span class="hljs-string">"test"</span>)<br />        .build();<br /><br />Pipeline pipeline = Pipeline.create();<br />pipeline.readFrom(DebeziumSources.cdc(configuration))<br />        .withoutTimestamps()<br />        .map(record -&gt; Values.convertToString(record.valueSchema(), record.value()))<br />        .writeTo(Sinks.logger());<br /><br />JobConfig jobConfig = <span class="hljs-keyword">new</span> JobConfig();<br />jobConfig.addJarsInZip(<span class="hljs-string">"/path/to/debezium-connector-mysql.zip"</span>);<br /><br />JetInstance jet = Jet.bootstrappedInstance();<br />Job job = jet.newJob(pipeline, jobConfig);<br />job.join();<br /></code></pre>
</span></div></div><div id="tab-group-22-content-25" class="tab-pane" data-group="group_22" tabindex="-1"><div><span><pre><code class="hljs css language-java">Configuration configuration = Configuration<br />        .create()<br />        .with(<span class="hljs-string">"name"</span>, <span class="hljs-string">"postgres-inventory-connector"</span>)<br />        .with(<span class="hljs-string">"connector.class"</span>, <span class="hljs-string">"io.debezium.connector.postgresql.PostgresConnector"</span>)<br />        <span class="hljs-comment">/* begin connector properties */</span><br />        .with(<span class="hljs-string">"database.hostname"</span>, postgres.getContainerIpAddress())<br />        .with(<span class="hljs-string">"database.port"</span>, postgres.getMappedPort(POSTGRESQL_PORT))<br />        .with(<span class="hljs-string">"database.user"</span>, <span class="hljs-string">"postgres"</span>)<br />        .with(<span class="hljs-string">"database.password"</span>, <span class="hljs-string">"postgres"</span>)<br />        .with(<span class="hljs-string">"database.dbname"</span>, <span class="hljs-string">"postgres"</span>)<br />        .with(<span class="hljs-string">"database.server.name"</span>, <span class="hljs-string">"dbserver1"</span>)<br />        .with(<span class="hljs-string">"schema.whitelist"</span>, <span class="hljs-string">"inventory"</span>)<br />        .with(<span class="hljs-string">"database.history.hazelcast.list.name"</span>, <span class="hljs-string">"test"</span>)<br />        .with(<span class="hljs-string">"tasks.max"</span>, <span class="hljs-string">"1"</span>)<br />        .build();<br /><br />Pipeline pipeline = Pipeline.create();<br />pipeline.readFrom(DebeziumSources.cdc(configuration))<br />        .withoutTimestamps()<br />        .map(record -&gt; Values.convertToString(record.valueSchema(), record.value()))<br />        .writeTo(Sinks.logger());<br /><br />JobConfig jobConfig = <span class="hljs-keyword">new</span> JobConfig();<br />jobConfig.addJarsInZip(<span class="hljs-string">"/path/to/debezium-connector-postgres.zip"</span>);<br /><br />JetInstance jet = Jet.bootstrappedInstance();<br />Job job = jet.newJob(pipeline, jobConfig);<br />job.join();<br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="dependencies"></a><a href="#dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependencies</h2>
<p>To run the above sample code you will need following libraries external to
Jet (latest versions available at the time of writing):</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-26-tab-27" class="nav-link active" data-group="group_26" data-tab="tab-group-26-content-27">Maven</div><div id="tab-group-26-tab-28" class="nav-link" data-group="group_26" data-tab="tab-group-26-content-28">Gradle</div></div><div class="tab-content"><div id="tab-group-26-content-27" class="tab-pane active" data-group="group_26" tabindex="-1"><div><span><pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br />  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br />      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.hazelcast.jet.contrib<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br />      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>debezium<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br />      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br />  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br /><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br /></code></pre>
</span></div></div><div id="tab-group-26-content-28" class="tab-pane" data-group="group_26" tabindex="-1"><div><span><pre><code class="hljs css language-bash">compile <span class="hljs-string">'com.hazelcast.jet.contrib:debezium:0.1'</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="uploading-connectors-to-the-job-classpath"></a><a href="#uploading-connectors-to-the-job-classpath" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Uploading Connectors to the Job Classpath</h2>
<p>Since we are instantiating external Kafka Connect Connectors on the Jet
runtime, we need to be able to access those classes. Connectors are
usually <strong>shipped as a ZIP file</strong>. The JAR files from inside the ZIP
archive can be uploaded to the Jet classpath via the <code>addJarsInZip</code>
method of the <code>JobConfig</code> class.</p>
<p>To find the connector archives:</p>
<ul>
<li>figure out what version of Debezium the Jet's debezium library
depends on; at the time of writing version 0.1 of the library
depends on <a href="https://mvnrepository.com/artifact/io.debezium/debezium-core/1.0.0.Final">Debezium 1.0</a>
, but this information can be simply checked at any time by looking at
the Jet debezium library's
<a href="https://mvnrepository.com/artifact/com.hazelcast.jet.contrib/debezium/0.1">transitive dependencies on Maven</a></li>
<li>go to the <a href="https://debezium.io/releases/">Releases section</a> on the
Debezium website</li>
<li>find the version you need, currently <a href="https://debezium.io/releases/1.0/">1.0</a></li>
<li>go to <a href="https://search.maven.org/search?q=g:io.debezium%20and%20v:1.0.0.Final*">Maven artifacts</a></li>
<li>download &quot;plugin.zip&quot; for the connector you need</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="events"></a><a href="#events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Events</h2>
<p>When a database client queries a database, it uses the database’s current
schema. However, the database schema can be changed at any time, which
means that the connector must know what the schema looked like at the
time each insert, update, or delete operation is recorded. For this
reason the events coming out of the Debezium connectors are
<strong>self-contained</strong>.</p>
<p>Each event has a <strong>key</strong> and a <strong>value</strong>. Every message key and value
has two parts: a <strong>schema</strong> and <strong>payload</strong>. The schema describes the
structure of the payload, while the payload contains the actual data.</p>
<p>Furthermore each connector emits events in a different schema so there
is no single format shared among connectors. The specifics of working
with each connector's data can be found in their respective
<a href="https://debezium.io/documentation/reference/1.0/connectors/index.html">documentation</a>
(latest stable version available at the time of writing).</p>
<h2><a class="anchor" aria-hidden="true" id="interpreting-events"></a><a href="#interpreting-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interpreting Events</h2>
<p>Even though events are connector specific and working with them is not
always straightforward, Debezium offers some assistance with
<a href="https://debezium.io/documentation/reference/1.0/configuration/serdes.html">deserializing them</a>
.</p>
<p>Below you can see an example Jet Pipeline, which:</p>
<ul>
<li>takes CDC data from a MySQL database (same configuration as
previous example)</li>
<li>filters out all events except ones from the &quot;customers&quot; table (same
effect could be achieved by whitelisting the table in the connector
config)</li>
<li>formats them into JSON strings</li>
<li>deserializes the JSON strings into <code>Customer</code> objects (simple POJOs)</li>
<li>stores the latest <code>Customer</code> object for each customer ID in an
<a href="https://docs.hazelcast.org/docs/latest-dev/javadoc/com/hazelcast/map/IMap.html">IMap</a></li>
</ul>
<pre><code class="hljs css language-java">Pipeline pipeline = Pipeline.create();
pipeline.readFrom(DebeziumSources.cdc(configuration))
        .withoutTimestamps()
        .filter(r -&gt; r.topic().equals(<span class="hljs-string">"dbserver1.inventory.customers"</span>))
        .map(record -&gt; Values.convertToString(record.valueSchema(), record.value()))
        .mapUsingService(
                ServiceFactories.nonSharedService(cntx -&gt; {
                    Serde&lt;Customer&gt; serde = DebeziumSerdes.payloadJson(Customer<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;
                    serde.configure(Collections.singletonMap(<span class="hljs-string">"from.field"</span>, <span class="hljs-string">"after"</span>), <span class="hljs-keyword">false</span>);
                    <span class="hljs-keyword">return</span> serde;
                }),
                (serde, json) -&gt; {
                    Customer customer = serde.deserializer()
                                .deserialize(<span class="hljs-string">"topic"</span>, json.getBytes());
                    <span class="hljs-keyword">return</span> entry(customer.id, customer);
                })
        .writeTo(Sinks.map(<span class="hljs-string">"customers"</span>));
</code></pre>
<p>The <strong>Customers</strong> class used to build the deserializer is quite simple:</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> id;

    <span class="hljs-meta">@JsonProperty</span>(<span class="hljs-string">"first_name"</span>)
    <span class="hljs-keyword">public</span> String firstName;

    <span class="hljs-meta">@JsonProperty</span>(<span class="hljs-string">"last_name"</span>)
    <span class="hljs-keyword">public</span> String lastName;

    <span class="hljs-keyword">public</span> String email;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Customer</span><span class="hljs-params">()</span> </span>{
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Customer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, String firstName, String lastName, String email)</span> </span>{
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.id = id;
        <span class="hljs-keyword">this</span>.firstName = firstName;
        <span class="hljs-keyword">this</span>.lastName = lastName;
        <span class="hljs-keyword">this</span>.email = email;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Objects.hash(email, firstName, id, lastName);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span> || getClass() != obj.getClass()) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        }
        Customer other = (Customer) obj;
        <span class="hljs-keyword">return</span> id == other.id
                &amp;&amp; Objects.equals(firstName, other.firstName)
                &amp;&amp; Objects.equals(lastName, other.lastName)
                &amp;&amp; Objects.equals(email, other.email);
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="snapshots"></a><a href="#snapshots" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Snapshots</h2>
<p>When a connector gets started up and not all database change-logs still
exist (typically the case when the database has been running for some
time), an initial snapshot of the database’s current state can be taken.</p>
<p>Debezium connectors will do so, if configured accordingly, and will
provide the contents of the snapshot in the form of events. Then they
will transition to providing the normal, log based events. This will be
done in a consistent way, no changes happening during the serving of the
snapshot will be lost.</p>
<p>Unfortunately the specifics of snapshotting differ from connector to
connector so their individual
<a href="https://debezium.io/documentation/reference/1.0/connectors/index.html">documentation</a>
needs to be consulted.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/tutorials/observables"><span class="arrow-prev">← </span><span>Reactive Streams</span></a><a class="docs-next button" href="/docs/tutorials/stream-imap"><span>Stream changes from IMap</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#dependencies">Dependencies</a></li><li><a href="#uploading-connectors-to-the-job-classpath">Uploading Connectors to the Job Classpath</a></li><li><a href="#events">Events</a></li><li><a href="#interpreting-events">Interpreting Events</a></li><li><a href="#snapshots">Snapshots</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo-light.svg" alt="Hazelcast Jet" width="200" height="40"/></a><div><h5>Docs</h5><a href="/docs/get-started/intro">Get Started</a><a href="/docs/tutorials/kafka">Tutorials</a><a href="/docs/operations/configuration">Operations Guide</a><a href="/docs/concepts/distributed-computing">Concepts and Architecture</a></div><div><h5>Community</h5><a href="https://groups.google.com/forum/#!forum/hazelcast-jet" target="_blank" rel="noreferrer noopener">Google Groups</a><a href="http://stackoverflow.com/questions/tagged/hazelcast-jet" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://gitter.im/hazelcast/hazelcast-jet">Gitter Chat</a></div><div><h5>Latest From the Blog</h5><a href="/blog/2020/02/20/transactional-processors">Transactional connectors in Hazelcast Jet</a><a href="/blog/2020/01/28/new-website">Announcing New Documentation Website</a><a href="/blog/2019/11/12/stream-deduplication">Stream Deduplication with Hazelcast Jet</a></div><div><h5>More</h5><a href="https://github.com/hazelcast/hazelcast-jet">GitHub Project</a><a href="https://github.com/hazelcast/hazelcast-jet/issues">Issue Tracker</a><a href="http://hazelcast.com/company/careers/">Work at Hazelcast</a><a class="github-button" href="https://github.com/hazelcast/hazelcast-jet" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 Hazelcast Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '79d1e4941621b9fd761d279d4d19ed69',
                indexName: 'hazelcast-jet',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>